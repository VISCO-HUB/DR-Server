<div ng-show="firstLoad > 0">
<div ng-show="showMsg.warn || showMsg.error || showMsg.success" class="alert alert-dismissible fade in" role="alert" ng-class="{'alert-warning': showMsg.warn, 'alert-success': showMsg.success, 'alert-danger': showMsg.error}">
			<button type="button" class="close"  aria-label="Close" ng-click="deleteMsg()"><span aria-hidden="true">&times;</span></button>
			
			{{showMsg.warn}}{{showMsg.error}}{{showMsg.success}}
</div>

<button type="button" class="btn btn-primary" ng-click="sendChallange()"><span class="glyphicon glyphicon-refresh" aria-hidden="true"></span> Update</button>
<label class="pull-right hidden-xs" ng-show="!isIE"><span class="glyphicon glyphicon-search" aria-hidden="true"></span> <input ng-model="search.$"></label> 
<br><br>

<table class="table table-hover">
	<tr>
		<th width="30px">#</th><th width="20%" ng-click="orderByParam('name')"><span>Name</span> <span class="glyphicon" ng-show="orderNodes == 'name'" ng-class="reverse ? 'glyphicon-triangle-bottom' : 'glyphicon-triangle-top'" aria-hidden="true"></span></th>
		<th ng-click="orderByParam('user')"><span>User</span> <span class="glyphicon" ng-show="orderNodes == 'user'" ng-class="reverse ? 'glyphicon-triangle-bottom' : 'glyphicon-triangle-top'" aria-hidden="true"></span></th>
		<th ng-click="orderByParam('job')"><span>Job Name</span> <span class="glyphicon" ng-show="orderNodes == 'job'" ng-class="reverse ? 'glyphicon-triangle-bottom' : 'glyphicon-triangle-top'" aria-hidden="true"></span></th>
		<th ng-click="orderByParam('services')"><span>Service</span> <span class="glyphicon" ng-show="orderNodes == 'services'" ng-class="reverse ? 'glyphicon-triangle-bottom' : 'glyphicon-triangle-top'" aria-hidden="true"></span></th>
		<th width="25%" ng-click="orderByParam('cpu')" class="hidden-xs"><span>CPU</span> <span class="glyphicon" ng-show="orderNodes == 'cpu'" ng-class="reverse ? 'glyphicon-triangle-bottom' : 'glyphicon-triangle-top'" aria-hidden="true"></span></th>
	</tr>
	<tr ng-repeat="node in dr | orderBy:orderNodes:reverse | filter:search" ip="{{node.ip}}" ng-show="socketResponse[node.ip] != 'DISCONNECTED'" ng-disabled="isReserved(node.user) || node.cpu > 60"  ng-model="checkModel[node.ip]" uib-btn-checkbox ng-class="{disabled: isReserved(node.user) || node.cpu > 60, reserved: node.user == userInfo.user}" ng-mouseenter="chekSwipe($event, node.ip, isReserved(node.user) || node.cpu > 60)" uib-popover-template="adminMenu.templateUrl" popover-trigger="'outsideClick'" ng-click="adminMenu.content=node">
		<td ><span class="glyphicon" ng-class="checkModel[node.ip] ? 'glyphicon-check': 'glyphicon-unchecked'" aria-hidden="true"></span></td>
		<td ><a href="" uib-tooltip="IP: {{node.ip}}">{{node.name}}</a></td>
		<td >
			{{node.user}}
		</td>
		<td >
			{{node.job}}
		</td>
		<td >
			{{node.services}}
		</td>
		<td class="hidden-xs">
		<div class="progress" style="margin-bottom: 0;">		
		  <div class="progress-bar progress-bar-striped active" ng-style="{'width': node.cpu + '%'}" ng-class="{'progress-bar-success': node.cpu > 0, 'progress-bar-warning': node.cpu > 33, 'progress-bar-danger': node.cpu > 66}">{{node.cpu}}%</div>		 		
		</div>
		</td>
	</tr>
</table>

<button type="button" class="btn btn-success" ng-click="getNodes()"><span class="glyphicon glyphicon-ok" aria-hidden="true"></span> Get Selected</button>	
<button type="button" class="btn btn-danger" ng-click="dropNodes()"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span> Drop Nodes</button>	
<div class="btn-group dropup" ng-show="reservedDr.length">
  <button type="button" class="btn btn-primary" data-toggle="dropdown">Actions</button>
  <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
    <span class="caret"></span>
    <span class="sr-only">Toggle Dropdown</span>
  </button>
<ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
    <li ng-repeat="service in services"><a href="" ng-click="runService(service.name)" tooltip-placement="left" uib-tooltip="This action will stop all services and run selected on reserved nodes."><span class="glyphicon glyphicon-play-circle" aria-hidden="true"></span> {{service.name}}</a></li>        
	<li class="divider"></li>
	<li><a href="" ng-click="rebootNodes()" tooltip-placement="left" uib-tooltip="This action will reboot all reserved nodes."><span class="glyphicon glyphicon-repeat" aria-hidden="true"></span> Reboot Nodes</a></li> 
  </ul>
</div>
</div>
</div>

<script type="text/ng-template" id="adminMenu.html">
	<button ng-show="adminMenu.content.user" class="btn btn-danger" ng-click="adminDropNodes(adminMenu.content.user)">Drop: {{adminMenu.content.user}}</button>
</script>